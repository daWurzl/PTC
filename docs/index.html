<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Druck-Ausschreibungen</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css">
</head>
<body>
    <h1>Druck-Ausschreibungen</h1>
    <table id="ausschreibungen" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Titel</th>
                <th>Datum</th>
                <th>Link</th>
                <th>Budget</th>
                <th>Anschrift</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script>
    fetch('../data/results.csv')
        .then(response => response.text())
        .then(csv => {
            const rows = csv.split('\n').slice(1);
            const tbody = document.querySelector('#ausschreibungen tbody');
            rows.forEach(row => {
                const cols = row.split(',');
                if (cols.length >= 5) {
                    const tr = document.createElement('tr');
                    cols.forEach(col => {
                        const td = document.createElement('td');
                        td.textContent = col;
                        tr.appendChild(td);
                    });
                    tbody.appendChild(tr);
                }
            });
            new DataTable('#ausschreibungen', {
                dom: 'Bfrtip',
                buttons: ['csvHtml5']
            });
        });
    </script>
</body>
</html>
